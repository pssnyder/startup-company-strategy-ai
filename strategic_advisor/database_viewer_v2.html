<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentum AI Database ER Diagram</title>
    <script src="https://unpkg.com/mermaid@11.2.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.8em;
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .controls {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }
        .zoom-btn, .view-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 0 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .zoom-btn:hover, .view-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .view-btn.active {
            background: #28a745;
        }
        .zoom-info {
            margin: 0 20px;
            font-weight: bold;
            color: #495057;
            font-size: 18px;
        }
        .diagram-container {
            background: white;
            padding: 40px;
            overflow: auto;
            min-height: 600px;
            position: relative;
        }
        .diagram-wrapper {
            transform-origin: center top;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-block;
            width: 100%;
        }
        .info-panel {
            background: #f8f9fa;
            padding: 25px;
            border-top: 3px solid #667eea;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
        }
        .stat-label {
            color: #6c757d;
            font-size: 0.95em;
            font-weight: 500;
        }
        .view-section {
            display: none;
        }
        .view-section.active {
            display: block;
        }
        .simple-diagram {
            font-family: monospace;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            line-height: 1.8;
            font-size: 14px;
            overflow-x: auto;
        }
        .table-box {
            border: 2px solid #667eea;
            background: white;
            margin: 10px;
            padding: 15px;
            border-radius: 8px;
            display: inline-block;
            min-width: 200px;
        }
        .table-title {
            font-weight: bold;
            color: #667eea;
            font-size: 16px;
            margin-bottom: 10px;
            text-align: center;
        }
        .column {
            margin: 3px 0;
            color: #495057;
        }
        .pk { color: #dc3545; font-weight: bold; }
        .fk { color: #28a745; font-weight: bold; }
        .relationship {
            text-align: center;
            color: #6c757d;
            font-size: 18px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Momentum AI Database Schema</h1>
            <p>Interactive Entity Relationship Visualization</p>
        </div>
        
        <div class="controls">
            <button class="view-btn active" onclick="showView('mermaid')">ğŸ“Š Mermaid Diagram</button>
            <button class="view-btn" onclick="showView('simple')">ğŸ“‹ Simple View</button>
            <span style="margin: 0 30px;">|</span>
            <button class="zoom-btn" onclick="zoomDiagram(0.7)">ğŸ”âˆ’ Zoom Out</button>
            <button class="zoom-btn" onclick="zoomDiagram(1.0)">ğŸ“ Reset</button>
            <button class="zoom-btn" onclick="zoomDiagram(1.3)">ğŸ”+ Zoom In</button>
            <span class="zoom-info" id="zoom-level">Zoom: 150%</span>
        </div>
        
        <!-- Mermaid Diagram View -->
        <div id="mermaid-view" class="view-section active">
            <div class="diagram-container">
                <div class="diagram-wrapper" id="diagram-wrapper">
                    <div class="mermaid" id="mermaid-diagram">
erDiagram
    SAVE_FILES {
        INTEGER id PK "ğŸ”‘"
        TEXT filename "ğŸ“"
        INTEGER game_day "ğŸ“…"
        REAL balance "ğŸ’°"
        REAL xp "â­"
        INTEGER research_points "ğŸ”¬"
        DATETIME real_timestamp "â°"
        TEXT company_name "ğŸ¢"
    }
    
    TRANSACTIONS {
        INTEGER id PK "ğŸ”‘"
        INTEGER save_file_id FK "ğŸ”—"
        TEXT transaction_id "ğŸ†”"
        INTEGER day "ğŸ“…"
        REAL amount "ğŸ’°"
        REAL balance "ğŸ“Š"
        TEXT label "ğŸ“"
    }
    
    EMPLOYEES {
        INTEGER id PK "ğŸ”‘"
        INTEGER save_file_id FK "ğŸ”—"
        TEXT employee_id "ğŸ†”"
        TEXT name "ğŸ‘¤"
        INTEGER salary "ğŸ’µ"
        TEXT employee_status "ğŸ“Š"
        REAL mood "ğŸ˜Š"
    }
    
    JEETS {
        INTEGER id PK "ğŸ”‘"
        INTEGER save_file_id FK "ğŸ”—"
        TEXT jeet_id "ğŸ†”"
        TEXT jeet_name "ğŸ‘¤"
        INTEGER day "ğŸ“…"
        TEXT text "ğŸ’¬"
    }
    
    MARKET_VALUES {
        INTEGER id PK "ğŸ”‘"
        INTEGER save_file_id FK "ğŸ”—"
        TEXT component_name "ğŸ·ï¸"
        INTEGER base_price "ğŸ’°"
        INTEGER game_day "ğŸ“…"
    }
    
    SAVE_FILES ||--o{ TRANSACTIONS : "financial_data"
    SAVE_FILES ||--o{ EMPLOYEES : "workforce"
    SAVE_FILES ||--o{ JEETS : "social_media"
    SAVE_FILES ||--o{ MARKET_VALUES : "market_data"
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Simple Diagram View -->
        <div id="simple-view" class="view-section">
            <div class="simple-diagram">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2>ğŸ“Š Database Structure Overview</h2>
                </div>
                
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">
                    <div class="table-box">
                        <div class="table-title">ğŸ’¾ SAVE_FILES (Central Hub)</div>
                        <div class="column pk">ğŸ”‘ id (PRIMARY KEY)</div>
                        <div class="column">ğŸ“ filename</div>
                        <div class="column">ğŸ“… game_day</div>
                        <div class="column">ğŸ’° balance</div>
                        <div class="column">â­ xp</div>
                        <div class="column">ğŸ”¬ research_points</div>
                        <div class="column">â° real_timestamp</div>
                        <div class="column">ğŸ¢ company_name</div>
                    </div>
                    
                    <div class="table-box">
                        <div class="table-title">ğŸ’³ TRANSACTIONS</div>
                        <div class="column pk">ğŸ”‘ id (PRIMARY KEY)</div>
                        <div class="column fk">ğŸ”— save_file_id (FK)</div>
                        <div class="column">ğŸ†” transaction_id</div>
                        <div class="column">ğŸ“… day</div>
                        <div class="column">ğŸ’° amount</div>
                        <div class="column">ğŸ“Š balance</div>
                        <div class="column">ğŸ“ label</div>
                    </div>
                    
                    <div class="table-box">
                        <div class="table-title">ğŸ‘¥ EMPLOYEES</div>
                        <div class="column pk">ğŸ”‘ id (PRIMARY KEY)</div>
                        <div class="column fk">ğŸ”— save_file_id (FK)</div>
                        <div class="column">ğŸ†” employee_id</div>
                        <div class="column">ğŸ‘¤ name</div>
                        <div class="column">ğŸ’µ salary</div>
                        <div class="column">ğŸ“Š employee_status</div>
                        <div class="column">ğŸ˜Š mood</div>
                    </div>
                    
                    <div class="table-box">
                        <div class="table-title">ğŸ¦ JEETS</div>
                        <div class="column pk">ğŸ”‘ id (PRIMARY KEY)</div>
                        <div class="column fk">ğŸ”— save_file_id (FK)</div>
                        <div class="column">ğŸ†” jeet_id</div>
                        <div class="column">ğŸ‘¤ jeet_name</div>
                        <div class="column">ğŸ“… day</div>
                        <div class="column">ğŸ’¬ text</div>
                    </div>
                    
                    <div class="table-box">
                        <div class="table-title">ğŸ“ˆ MARKET_VALUES</div>
                        <div class="column pk">ğŸ”‘ id (PRIMARY KEY)</div>
                        <div class="column fk">ğŸ”— save_file_id (FK)</div>
                        <div class="column">ğŸ·ï¸ component_name</div>
                        <div class="column">ğŸ’° base_price</div>
                        <div class="column">ğŸ“… game_day</div>
                    </div>
                </div>
                
                <div class="relationship">
                    <h3>ğŸ”— Relationships</h3>
                    <p><strong>save_files</strong> â”€â”€â†’ <strong>transactions</strong> (One-to-Many)</p>
                    <p><strong>save_files</strong> â”€â”€â†’ <strong>employees</strong> (One-to-Many)</p>
                    <p><strong>save_files</strong> â”€â”€â†’ <strong>jeets</strong> (One-to-Many)</p>
                    <p><strong>save_files</strong> â”€â”€â†’ <strong>market_values</strong> (One-to-Many)</p>
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <h3>ğŸ“Š Database Statistics</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">7</div>
                    <div class="stat-label">Save Files</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">606</div>
                    <div class="stat-label">Transactions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">420</div>
                    <div class="stat-label">Market Data Points</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">32</div>
                    <div class="stat-label">Social Posts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">193</div>
                    <div class="stat-label">Game Days Tracked</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid with updated configuration
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#5a6fd8',
                lineColor: '#6c757d',
                sectionBkgColor: '#f8f9fa',
                altSectionBkgColor: '#e9ecef',
                gridColor: '#e9ecef',
                secondaryColor: '#f8f9fa',
                tertiaryColor: '#ffffff'
            },
            er: {
                fontSize: 16,
                useMaxWidth: false,
                minEntityWidth: 100,
                minEntityHeight: 75
            }
        });
        
        let currentZoom = 1.5; // Start zoomed in for better readability
        
        function zoomDiagram(factor) {
            if (factor === 1.0) {
                currentZoom = 1.0;
            } else {
                currentZoom *= factor;
            }
            
            // Constrain zoom levels
            currentZoom = Math.max(0.3, Math.min(4.0, currentZoom));
            
            const wrapper = document.getElementById('diagram-wrapper');
            if (wrapper) {
                wrapper.style.transform = `scale(${currentZoom})`;
            }
            
            // Update zoom level display
            const zoomDisplay = document.getElementById('zoom-level');
            if (zoomDisplay) {
                zoomDisplay.textContent = `Zoom: ${Math.round(currentZoom * 100)}%`;
            }
        }
        
        function showView(viewName) {
            // Hide all views
            const views = document.querySelectorAll('.view-section');
            views.forEach(view => view.classList.remove('active'));
            
            // Remove active class from all view buttons
            const buttons = document.querySelectorAll('.view-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected view
            document.getElementById(`${viewName}-view`).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial zoom after a delay to ensure Mermaid has rendered
            setTimeout(() => {
                zoomDiagram(1.5); // Start at 150% zoom for better readability
            }, 1500);
        });
    </script>
</body>
</html>